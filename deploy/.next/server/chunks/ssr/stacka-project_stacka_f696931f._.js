module.exports=[62686,a=>{"use strict";let b=(0,a.i(60010).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);a.s(["TrendingDown",()=>b],62686)},86252,a=>{"use strict";let b=(0,a.i(60010).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],86252)},56003,a=>{"use strict";var b=a.i(15080),c=a.i(37031);let d=(0,b.create)(a=>({balance:0,availableBalance:0,blockchainBalance:0,platformBalance:0,nairaBalance:0,depositAddress:"",exchangeRate:null,isLoading:!1,error:null,fetchBalance:async()=>{a({isLoading:!0,error:null});try{let b=await c.apiClient.getBalance(),d=b?.data||b,e=d.wallet||{},f=d.trading||{};a({balance:d.totalBalance||d.balance||0,availableBalance:e.total||d.wallet?.total||0,blockchainBalance:e.defi||d.blockchainBalance||0,platformBalance:f.total||d.platformBalance||0,nairaBalance:e.naira||d.nairaBalance||0,exchangeRate:d.exchangeRate||null,isLoading:!1})}catch(b){console.error("âŒ Balance fetch error:",b),a({error:b.message,isLoading:!1})}},fetchDepositAddress:async()=>{a({isLoading:!0,error:null});try{let b=await c.apiClient.getDepositAddress();a({depositAddress:b.data.depositAddress||"",isLoading:!1})}catch(b){a({error:b.message,isLoading:!1})}},fetchExchangeRate:async()=>{try{let b=await c.apiClient.getExchangeRate(),d=b?.data||b;a({exchangeRate:d})}catch(a){console.error("âŒ Exchange rate fetch error:",a)}}}));a.s(["useWalletStore",0,d])},37789,a=>{"use strict";let b=(0,a.i(60010).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);a.s(["Info",()=>b],37789)},67658,a=>{"use strict";var b=a.i(37580),c=a.i(29104),d=a.i(7416),e=a.i(86252),f=a.i(313),g=a.i(62686),h=a.i(37789),i=a.i(96695),j=a.i(56003),k=a.i(37031),l=a.i(47834),m=a.i(91825),n=a.i(46022),o=a.i(32816),p=a.i(76789),q=a.i(44127),r=a.i(11697);function s(){let a=(0,d.useRouter)(),s=(0,d.useParams)(),t=(0,d.useSearchParams)(),{isAuthenticated:u}=(0,i.useAuthStore)(),{availableBalance:v,exchangeRate:w,fetchBalance:x}=(0,j.useWalletStore)(),y=s.symbol,z=t.get("market")||"US",[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)("1"),[G,H]=(0,c.useState)("buy"),[I,J]=(0,c.useState)(!1);(0,c.useEffect)(()=>{u?(K(),x()):a.push("/login")},[u,a,y,z]);let K=async()=>{try{D(!0);let a="NGN"===z?await k.apiClient.getNigerianStocks({limit:50}):await k.apiClient.getUSStocks({limit:50}),b=(a?.data?.stocks||[]).find(a=>a.symbol===y.toUpperCase());b&&B(b)}catch(a){console.error("Failed to fetch stock details:",a)}finally{D(!1)}},L=async()=>{if(!E||0>=parseFloat(E))return void r.default.error("Please enter a valid quantity");let b=A.price*parseFloat(E),c=w?.ngnToUsd||67e-5,d="NGN"===z?b*c:b;if("buy"===G&&d>v)return void r.default.error(`Insufficient balance. You have ${(0,q.formatCurrency)(v)} available.`);try{J(!0),r.default.loading(`Processing ${"buy"===G?"purchase":"sale"}...`,{id:"stock-order"});let b={symbol:y.toUpperCase(),type:G.toUpperCase(),quantity:parseFloat(E)},c="NGN"===z?await k.apiClient.tradeNigerianStock(b):await k.apiClient.tradeUSStock(b),d=c?.data?.conversion;d?.converted?(r.default.success(`ðŸ’± Converted $${d.usdcAmount.toFixed(2)} USDC â†’ â‚¦${d.ngnAmount.toFixed(2)} NGN`,{id:"stock-order",duration:2e3}),setTimeout(()=>{r.default.success(`${"buy"===G?"Bought":"Sold"} ${E} shares of ${y}`,{duration:3e3})},2e3)):r.default.success(`${"buy"===G?"Bought":"Sold"} ${E} shares of ${y}`,{id:"stock-order",duration:3e3}),await x(),a.push("/portfolio")}catch(b){console.error("Order failed:",b);let a=b.response?.data?.message||b.message||"Order failed. Please try again.";r.default.error(a,{id:"stock-order"})}finally{J(!1)}},M=A?A.price*parseFloat(E||"0"):0,N="NGN"===z?"â‚¦":"$",O=w?.ngnToUsd||67e-5,P=w?.usdToNgn||1492.54,Q="NGN"===z?M*O:M,R=v*P;return C?(0,b.jsxs)("div",{className:"min-h-screen bg-black pb-20",children:[(0,b.jsx)(l.default,{title:"Loading..."}),(0,b.jsx)("main",{className:"p-4",children:(0,b.jsx)(n.default,{className:"p-6",children:(0,b.jsx)("p",{className:"text-center text-text-secondary",children:"Loading stock details..."})})}),(0,b.jsx)(m.default,{})]}):A?(0,b.jsxs)("div",{className:"min-h-screen bg-black pb-20",children:[(0,b.jsx)(l.default,{title:A.symbol,subtitle:A.name,actions:(0,b.jsxs)(p.default,{variant:"ghost",size:"sm",onClick:()=>a.back(),className:"flex items-center gap-2",children:[(0,b.jsx)(e.ArrowLeft,{className:"w-4 h-4"}),"Back"]})}),(0,b.jsxs)("main",{className:"p-4 space-y-6",children:[(0,b.jsxs)(n.default,{className:"p-6",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-accent-purple flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-3xl font-bold text-white",children:A.symbol.charAt(0)})}),(0,b.jsxs)("h2",{className:"text-3xl font-bold mb-2",children:[N,A.price.toFixed(2)]}),"NGN"===z&&(0,b.jsxs)("p",{className:"text-sm text-text-secondary mb-2",children:["â‰ˆ $",(A.price/P).toFixed(4)," USD"]}),(0,b.jsxs)("div",{className:`flex items-center justify-center gap-2 ${A.changePercent>=0?"text-accent-green":"text-accent-red"}`,children:[A.changePercent>=0?(0,b.jsx)(f.TrendingUp,{className:"w-5 h-5"}):(0,b.jsx)(g.TrendingDown,{className:"w-5 h-5"}),(0,b.jsxs)("span",{className:"text-lg font-semibold",children:[N,Math.abs(A.change||0).toFixed(2)," (",Math.abs(A.changePercent||0).toFixed(2),"%)"]})]}),(0,b.jsx)("p",{className:"text-sm text-text-tertiary mt-2",children:"Today"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/10",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-text-secondary",children:"Market"}),(0,b.jsx)("p",{className:"font-semibold",children:"NGN"===z?"Nigerian Stock Exchange":"US Stock Market"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-text-secondary",children:"Symbol"}),(0,b.jsx)("p",{className:"font-semibold",children:A.symbol})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>H("buy"),className:`flex-1 py-3 rounded-xl font-semibold transition-all ${"buy"===G?"bg-accent-green text-black":"bg-background-hover text-text-secondary"}`,children:"Buy"}),(0,b.jsx)("button",{onClick:()=>H("sell"),className:`flex-1 py-3 rounded-xl font-semibold transition-all ${"sell"===G?"bg-accent-red text-black":"bg-background-hover text-text-secondary"}`,children:"Sell"})]}),(0,b.jsxs)(n.default,{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-text-secondary mb-2",children:"Quantity (shares)"}),(0,b.jsx)(o.default,{type:"number",value:E,onChange:a=>F(a.target.value),placeholder:"Enter quantity",min:"1",step:"1"})]}),(0,b.jsxs)("div",{className:"py-3 border-t border-b border-white/10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-text-secondary",children:"Total Cost"}),(0,b.jsxs)("span",{className:"text-xl font-bold",children:[N,M.toFixed(2)]})]}),"NGN"===z&&(0,b.jsx)("div",{className:"flex items-center justify-end mt-1",children:(0,b.jsxs)("span",{className:"text-sm text-text-tertiary",children:["â‰ˆ $",Q.toFixed(2)," USD"]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-text-secondary",children:"Available Balance"}),(0,b.jsx)("span",{className:"font-semibold",children:"NGN"===z?`â‚¦${R.toFixed(2)}`:(0,q.formatCurrency)(v)})]}),"NGN"===z&&(0,b.jsx)("div",{className:"flex items-center justify-end mt-1",children:(0,b.jsxs)("span",{className:"text-xs text-text-tertiary",children:["$",v.toFixed(2)," USDC (auto-converts to NGN)"]})})]}),"buy"===G&&Q>v&&"NGN"===z&&(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-accent-blue/10 border border-accent-blue/20 rounded-lg",children:[(0,b.jsx)(h.Info,{className:"w-5 h-5 text-accent-blue flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"text-accent-blue font-medium",children:"Auto-conversion enabled"}),(0,b.jsx)("p",{className:"text-text-secondary mt-1",children:"Your USDC will be automatically converted to NGN at market rate to complete this purchase"})]})]}),"buy"===G&&Q>v&&"NGN"!==z&&(0,b.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-accent-red/10 border border-accent-red/20 rounded-lg",children:[(0,b.jsx)(h.Info,{className:"w-5 h-5 text-accent-red flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"text-accent-red font-medium",children:"Insufficient balance"}),(0,b.jsxs)("p",{className:"text-text-secondary mt-1",children:["You need ",(0,q.formatCurrency)(Q-v)," ","more to complete this order"]})]})]}),(0,b.jsx)(p.default,{variant:"buy"===G?"primary":"secondary",className:`w-full ${"sell"===G?"bg-accent-red hover:bg-accent-red/90":""}`,onClick:L,disabled:I||!E||0>=parseFloat(E)||"buy"===G&&Q>v,children:I?"Processing...":`${"buy"===G?"Buy":"Sell"} ${A.symbol}`})]}),(0,b.jsx)(n.default,{className:"bg-background-hover p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(h.Info,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsxs)("p",{className:"text-text-secondary",children:["This is a ","NGN"===z?"Nigerian":"US"," stock. Orders are executed at market price.","NGN"===z&&` Current exchange rate: â‚¦${P.toFixed(2)} = $1 USD.`]})})]})})]}),(0,b.jsx)(m.default,{})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-black pb-20",children:[(0,b.jsx)(l.default,{title:"Stock Not Found"}),(0,b.jsx)("main",{className:"p-4",children:(0,b.jsxs)(n.default,{className:"p-6 text-center",children:[(0,b.jsx)("p",{className:"text-text-secondary mb-4",children:"Stock not found"}),(0,b.jsx)(p.default,{onClick:()=>a.back(),children:"Go Back"})]})}),(0,b.jsx)(m.default,{})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=stacka-project_stacka_f696931f._.js.map